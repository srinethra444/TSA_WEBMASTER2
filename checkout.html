<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="checkout.css">
<title>Green Fork</title>
<link rel="icon" type="image/png" href="TSA_NEWLOGO.png">
<style>
body {
  font-family: Arial;
  font-size: 17px;
  padding: 8px;
}

* {
  box-sizing: border-box;
}


.col-25,
.col-50,
.col-75 {
  padding: 0 16px;
}

.row {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between; 
  gap: 20px; /* Adds spacing between elements */
}

.col-25, .col-50, .col-75 {
  flex: 1; /* Makes each column take equal width */
  min-width: 300px; /* Prevents items from getting too small */
}

.container {
  background-color: #f2f2f2;
  padding: 20px;
  border: 1px solid lightgrey;
  border-radius: 3px;
  box-sizing: border-box;
}


input[type=text] {
  width: 100%;
  margin-bottom: 20px;
  padding: 12px;
  border: 1px solid #ccc;
  border-radius: 3px;
}

label {
  margin-bottom: 10px;
  display: block;
}

.icon-container {
  margin-bottom: 20px;
  padding: 7px 0;
  font-size: 24px;
}

.btn {
  background-color: #37613b;
  color: white;
  padding: 12px;
  margin: 10px 0;
  border: none;
  width: 100%;
  border-radius: 3px;
  cursor: pointer;
  font-size: 17px;
}

.btn:hover {
  background-color: #243f25;
}

a {
  color: #182812;
}

hr {
  border: 1px solid lightgrey;
}

span.price {
  float: right;
  color: grey;
}

h2 {
  text-align: center;
}

/* Responsive layout - when the screen is less than 800px wide, make the two columns stack on top of each other instead of next to each other (also change the direction - make the "cart" column go on top) */
@media (max-width: 800px) {
  .row {
    flex-direction: column-reverse;
  }
  .col-25, .col-75 {
    margin-bottom: 100%;
  }
}

.remove-btn {
    background-color: red;
    color: white;
    border: none;
    border-radius: 3px;
    padding: 5px 10px;
    cursor: pointer;
    font-size: 14px;
    margin-left: 10px;
}

.remove-btn:hover {
    background-color: darkred;
}
</style>
</head>
<body>

  <a href="checkout.html">
    <img class="shopping-cart" src="NEWcart.png" alt="Shopping Cart">
</a>

<!-- Navbar Code-->
<h1> THE GREEN FORK </h1>
<a href="index.html">
<img class = "logo" src="TSA_NEWLOGO.png" alt="The Green Fork Logo">
</a>

<div class="navbar">
  <ul class="nav navbar-nav">
      <li><a href="index.html">Home</a></li>
      <li><a href="appetizer.html">Appetizers</a></li>
      <li class="dropdown">
          <a href="entree.html" >Entreesâ–¾<i class="fa fa-caret-down"></i></a>
          <div class="dropdown-content">
              <a href="breakfast.html">Breakfast</a>
              <a href="lunch.html">Lunch</a>
              <a href="dinner.html">Dinner</a>
          </div>
      </li>
      <li><a href="desserts.html">Desserts</a></li>
      <li><a href="drinks.html">Drinks</a></li>
      <li><a href="reference.html">Reference</a></li>
      <li><a href="team.html">About Us</a></li>

  </ul>
</div>

<h2> Checkout Form</h2>
<div class="row">
    <div class="col-25">
        <div class="container">
            <h4>Cart <span class="price" style="color:black"><i class="fa fa-shopping-cart"></i> <b class="item-count">0</b></span></h4>
            <div class="cart-items">
                <!-- Cart items will be dynamically added here -->
            </div>
            <hr>
            <p>Total <span class="price total-price" style="color:black"><b>$0.00</b></span></p>
        </div>
    </div>
</div>
<br>
<div class="col-50">
<div class="container">
    <h4> Choose a Way to Enjoy!</h4>
    <label for="pickup"><input type="radio" id="pickup" name="delivery" value="pickup" checked> Pickup</label><br>
    <label for="delivery"><input type="radio" id="delivery" name="delivery" value="delivery"> Delivery</label><br>
    <label for="dinein"><input type="radio" id="dinein" name="delivery" value="dinein"> Dine In</label><br>

</div>
</div>

<br>

  <div class="col-75">
    <div class="container">      
        <div class="row">
          <div class="col-50">
            <h3>Billing Address</h3>
            <label for="fname"><i class="fa fa-user"></i> Full Name</label>
            <input type="text" id="fname" name="firstname" placeholder="Type Full Name Here">
            <label for="email"><i class="fa fa-envelope"></i> Email Address</label>
            <input type="text" id="email" name="email" placeholder="Type Email Here">
            <label for="adr"><i class="fa fa-address-card-o"></i> Address</label>
            <input type="text" id="adr" name="address" placeholder="Insert Email Here">
            <label for="city"><i class="fa fa-institution"></i> City</label>
            <input type="text" id="city" name="city" placeholder="City Name">

            <div class="row">
              <div class="col-50">
                <label for="state">State</label>
                <input type="text" id="state" name="state" placeholder="NJ">
              </div>
              <div class="col-50">
                <label for="zip">Zip Code</label>
                <input type="text" id="zip" name="zip" placeholder="11111">
              </div>
            </div>
          </div>

          <div class="col-50">
            <h3>Payment</h3>
            <label for="fname">Accepted Cards</label>
            <div class="icon-container">
              <i class="fa fa-cc-visa" style="color:navy;">Visa</i>
              <i class="fa fa-cc-amex" style="color:blue;">AmericanExpress</i>
              <i class="fa fa-cc-mastercard" style="color:red;">MasterCard</i>
              <i class="fa fa-cc-discover" style="color:orange;">Discover</i>
            </div>
            <label for="cname">Name on Card</label>
            <input type="text" id="cname" name="cardname" placeholder="Name On Card">
            <label for="ccnum">Credit Card Number</label>
            <input type="text" id="ccnum" name="cardnumber" placeholder="1111-2222-3333-4444">
            <label for="expmonth">Expire Month</label>
            <input type="text" id="expmonth" name="expmonth" placeholder="January">
            <div class="row">
              <div class="col-50">
                <label for="expyear">Expire Year</label>
                <input type="text" id="expyear" name="expyear" placeholder="2025">
              </div>
              <div class="col-50">
                <label for="cvv">CVV</label>
                <input type="text" id="cvv" name="cvv" placeholder="123">
              </div>
            </div>
          </div>
          
        </div>
        <label>
          <input type="checkbox" checked="checked" name="sameadr"> Shipping address same as Billing
        </label>
        <input type="submit" value="Checkout" class="btn" onclick="return validateForm()">    </div>
  </div>

</div>

<a href="checkout.html">
  <img class="shopping-cart" src="NEWcart.png" alt="Shopping Cart">
  <span id="cart-count">0</span>
</a>


<script>
  function loadCart() {
      const cartContainer = document.querySelector('.cart-items');
      const totalPriceElement = document.querySelector('.total-price');
      const itemCountElement = document.querySelector('.item-count');

      // Retrieve cart from localStorage
      const cart = JSON.parse(localStorage.getItem('cart')) || [];

      // Clear the cart container
      cartContainer.innerHTML = '';

      // Populate the cart with items
      let totalPrice = 0;
      let totalItems = 0;
      
      cart.forEach((item, index) => {
          // Ensure price and quantity are valid numbers
          const itemPrice = parseFloat(item.price) || 0;
          const itemQuantity = parseInt(item.quantity) || 0;

          const cartItem = document.createElement('p');
          cartItem.innerHTML = `
              <a href="#">${item.name}</a> 
            <div style="display: inline-block; margin-left: 10px;">
                <button class="quantity-btn ${itemQuantity === 1 ? 'disabled' : ''}" onclick="changeCartQuantity(${index}, -1)" ${itemQuantity === 1 ? 'disabled' : ''}>-</button>
                <span class="quantity">${itemQuantity}</span>
                <button class="quantity-btn ${itemQuantity === 10 ? 'disabled' : ''}" onclick="changeCartQuantity(${index}, 1)" ${itemQuantity === 10 ? 'disabled' : ''}>+</button>
            </div>
            <span class="price">$${(itemPrice * itemQuantity).toFixed(2)}</span>
            <button class="remove-btn" onclick="removeFromCart(${index})">ðŸ—‘</button>
        `;
          cartContainer.appendChild(cartItem);

          // Calculate total price and total items
          totalPrice += itemPrice * itemQuantity;
          totalItems += itemQuantity;
      });

      // Update total price and item count
      totalPriceElement.innerText = `$${totalPrice.toFixed(2)}`;
      itemCountElement.innerText = totalItems;
  }

  function removeFromCart(index) {
      // Retrieve cart from localStorage
      let cart = JSON.parse(localStorage.getItem('cart')) || [];

      // Remove the item at the specified index
      cart.splice(index, 1);

      // Save the updated cart back to localStorage
      localStorage.setItem('cart', JSON.stringify(cart));

      // Reload the cart to reflect changes
      loadCart();

      updateCartCount();
  }

  document.addEventListener('DOMContentLoaded', loadCart);

  function validateForm() {
      const requiredFields = [
          document.getElementById('fname'),
          document.getElementById('email'),
          document.getElementById('adr'),
          document.getElementById('city'),
          document.getElementById('state'),
          document.getElementById('zip'),
          document.getElementById('cname'),
          document.getElementById('ccnum'),
          document.getElementById('expmonth'),
          document.getElementById('expyear'),
          document.getElementById('cvv')
      ];

      // Check if any field is empty
      for (const field of requiredFields) {
          if (!field.value.trim()) {
              alert("Fill Out all the Fields to Pay");
              return false; // Prevent form submission
          }
      }

      // If all fields are filled, show success alert
      alert("Your Order was Sent!");

      // Clear the cart from localStorage
      localStorage.removeItem('cart');

      // Reload the cart display to show an empty cart
      loadCart();

      return true; // Allow form submission
  }

  updateCartCount(); // Update the cart count display
        
   function updateCartCount() {
    const cart = JSON.parse(localStorage.getItem('cart')) || [];
    const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
    const cartCountElement = document.getElementById('cart-count');
    if (cartCountElement) {
    cartCountElement.innerText = totalItems;
   }
}

document.addEventListener('DOMContentLoaded', function () {
    updateCartCount();
});

function changeCartQuantity(index, change) {
    const cart = JSON.parse(localStorage.getItem('cart')) || [];

    // Update the quantity
    cart[index].quantity += change;

    // Ensure quantity is at least 1
    if (cart[index].quantity < 1) {
        cart[index].quantity = 1;
    }
    if (cart[index].quantity > 10) {
        cart[index].quantity = 10;
    }

    // Save the updated cart back to localStorage
    localStorage.setItem('cart', JSON.stringify(cart));

    // Re-render the cart
    loadCart();

    updateCartCount();
}
</script>


</body>
</html>
<!-- Stop here-->